<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="The package riskyData has been developed for the Evidence and Risk colleagues to cleanly and reliably import data from the Environment Agencies API.">
<title>Welcome to riskyData the tool for pulling observed data from the EAs API • riskyData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Welcome to riskyData the tool for pulling observed data from the EAs API">
<meta property="og:description" content="The package riskyData has been developed for the Evidence and Risk colleagues to cleanly and reliably import data from the Environment Agencies API.">
<meta property="og:image" content="https://jonpayneea.github.io/riskyData/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">riskyData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/riskyData-Containers.html">riskyData-Containers</a>
    <a class="dropdown-item" href="articles/riskyData-Methods.html">riskyData-Methods</a>
    <a class="dropdown-item" href="articles/riskyData-Ratings.html">riskyData-Ratings</a>
    <a class="dropdown-item" href="articles/riskyData-Welcome.html">riskyData-Welcome</a>
    <a class="dropdown-item" href="articles/riskyData-realtime.html">riskyData-Realtime data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JonPayneEA/riskyData/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="riskydata-">riskyData <a class="anchor" aria-label="anchor" href="#riskydata-"></a>
</h1>
</div>
<!-- badges: start -->

<!-- badges: end -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This package is part of the fleet of <code>flode</code> tools designed for members of Evidence and Risk. This package, <code>riskyData</code>, is used to interact with the EAs Hydrology Data Explorer via the API. Hydrometric data can be pulled using in built functions. Data are stored in containers that implement strict quality controls. Data can be interrogated using a range of inbuilt tools.</p>
</div>
<div class="section level2">
<h2 id="installation-and-loading">Installation and loading<a class="anchor" aria-label="anchor" href="#installation-and-loading"></a>
</h2>
<p>You can install the development version of riskyData from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"JonPayne88/riskyData"</span><span class="op">)</span></span></code></pre></div>
<p>To load the package use;</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jonpayneea.github.io/riskyData/">riskyData</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-1---importing-data">Example 1 - Importing data<a class="anchor" aria-label="anchor" href="#example-1---importing-data"></a>
</h2>
<p>To find the data available for a gauge;</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## WISKI ID 2002</span></span>
<span><span class="fu"><a href="reference/loadAPI.html">loadAPI</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="st">'2002'</span><span class="op">)</span></span>
<span><span class="co">#&gt;    measure period          type</span></span>
<span><span class="co">#&gt; 1:    flow    900 instantaneous</span></span>
<span><span class="co">#&gt; 2:    flow  86400           min</span></span>
<span><span class="co">#&gt; 3:    flow  86400          mean</span></span>
<span><span class="co">#&gt; 4:   level  86400           max</span></span>
<span><span class="co">#&gt; 5:    flow  86400           max</span></span>
<span><span class="co">#&gt; 6:   level    900 instantaneous</span></span>
<span><span class="co">#&gt; 7:   level  86400           min</span></span></code></pre></div>
<p>To drill further into the data use;</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">loadAPI</span>(<span class="at">ID =</span> <span class="st">'2002'</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">measure =</span> <span class="st">'flow'</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">period =</span> <span class="dv">900</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'instantaneous'</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">datapoints =</span> <span class="st">'range'</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">from =</span> <span class="st">'2012-10-01 00:00'</span>,<span class="sc">-</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">to =</span> <span class="st">'2013-10-01 00:00'</span>)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Compiling parameters for raw download✔ Compiling parameters for raw download [621ms]</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Downloading raw data✔ Downloading raw data [2.8s]</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Collating metadata✔ Collating metadata [663ms]</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Exporting data to HydroImport container✔ Exporting data to HydroImport container [396ms]</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Class: HydroImport ──────────────────────────────────────────────────────────</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Private: ──</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data Type: Raw Import</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Station name: Evesham</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; WISKI ID: 2002</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data Type: Flow</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Modifications: NA</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Start: 2012-10-01</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; End: 2013-09-30 23:45:00</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Time Step: 900</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Observations: 35040</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Easting: 404007</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Northing: 243741</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Longitude: -1.94292</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Latitude: 52.091994</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Public: ──</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   dateTime value quality</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: 2012-10-01 00:00:00 10.50    Good</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: 2012-10-01 00:15:00 10.40    Good</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: 2012-10-01 00:30:00 10.40    Good</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     4: 2012-10-01 00:45:00 10.40    Good</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     5: 2012-10-01 01:00:00 10.40    Good</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                  </span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35036: 2013-09-30 22:45:00  4.64    Good</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35037: 2013-09-30 23:00:00  4.64    Good</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35038: 2013-09-30 23:15:00  4.64    Good</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35039: 2013-09-30 23:30:00  4.64    Good</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 35040: 2013-09-30 23:45:00  4.64    Good</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; For more details use the $methods() function, the format should be as</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `Object_name`$methods()</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-2---compile-daily-flow-statistics">Example 2 - compile daily flow statistics<a class="anchor" aria-label="anchor" href="#example-2---compile-daily-flow-statistics"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Import the Bewdley dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Using a pipe calculate the hydrological year and then calculate statistics</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">hydroYearDay</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">dayStats</span><span class="op">(</span>plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ Calculating hydrological year and day✔ Calculating hydrological year and day [12.9s]</span></span></code></pre></div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      dayYear     Mean Median  Min Max   Perc5 Perc25  Perc75 Perc95</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1:       1 39.17188  19.30 9.68 210 10.4000 12.200  35.600 192.00</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   2:       2 47.99227  25.80 9.64 225 10.2000 12.400  62.500 215.00</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   3:       3 53.14900  34.55 9.26 255  9.9715 11.600  67.725 228.00</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   4:       4 59.77555  40.65 9.39 252  9.9400 10.900  87.425 240.00</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   5:       5 63.06871  34.70 9.76 228 10.2000 11.700 106.000 189.85</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ---                                                               </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 361:     361 33.29305  15.05 9.26 222 10.1000 10.975  35.925 163.85</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 362:     362 36.36758  15.85 8.77 254  9.8800 11.300  28.500 245.00</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 363:     363 38.64064  16.10 9.53 254  9.8115 11.000  26.100 250.00</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 364:     364 42.81338  16.20 9.35 247  9.8445 12.175  38.125 214.85</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 365:     365 40.54762  15.70 9.65 196 10.8000 12.500  31.550 172.00</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-3---use-run-length-encoding-to-seperate-rainfall-events">Example 3 - Use run length encoding to seperate rainfall events<a class="anchor" aria-label="anchor" href="#example-3---use-run-length-encoding-to-seperate-rainfall-events"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Import the Chesterton rain gauge data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">chesterton</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Calculate rain separation use RLE, minimum total event must be at least 2mm</span></span>
<span><span class="fu"><a href="reference/rainSep.html">rainSep</a></span><span class="op">(</span>dateTime <span class="op">=</span> <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">dateTime</span>,</span>
<span>        precip <span class="op">=</span> <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span>,</span>
<span>        threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>        minTotal <span class="op">=</span> <span class="fl">2</span>,</span>
<span>        roll <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id               start                 end total</span></span>
<span><span class="co">#&gt;   1:   1 2011-01-07 08:30:00 2011-01-07 10:00:00   6.5</span></span>
<span><span class="co">#&gt;   2:   2 2011-01-11 02:15:00 2011-01-11 03:00:00   2.0</span></span>
<span><span class="co">#&gt;   3:   3 2011-01-13 20:30:00 2011-01-13 22:15:00   5.0</span></span>
<span><span class="co">#&gt;   4:   4 2011-02-19 06:45:00 2011-02-19 08:30:00   4.0</span></span>
<span><span class="co">#&gt;   5:   5 2011-02-26 00:30:00 2011-02-26 01:15:00   3.0</span></span>
<span><span class="co">#&gt;  ---                                                  </span></span>
<span><span class="co">#&gt; 861: 861 2022-09-09 14:30:00 2022-09-09 14:45:00   8.4</span></span>
<span><span class="co">#&gt; 862: 862 2022-09-09 15:30:00 2022-09-09 16:15:00   6.0</span></span>
<span><span class="co">#&gt; 863: 863 2022-09-26 10:00:00 2022-09-26 10:15:00   3.6</span></span>
<span><span class="co">#&gt; 864: 864 2022-09-30 14:15:00 2022-09-30 17:00:00   5.8</span></span>
<span><span class="co">#&gt; 865: 865 2022-09-30 18:00:00 2022-09-30 19:30:00   3.8</span></span></code></pre></div>
<p>These can be integrated into plots;</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Plot the base data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">dateTime</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span>, <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span>,</span>
<span>     ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fl">30000</span><span class="op">:</span><span class="fl">40000</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    type <span class="op">=</span> <span class="st">'h'</span>, ylab <span class="op">=</span> <span class="st">"Rainfall (mm)"</span>, xlab <span class="op">=</span> <span class="st">"Date Time"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Calculate the rain profiles using a 5hr aggregation</span></span>
<span><span class="va">dayRain</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rainSep.html">rainSep</a></span><span class="op">(</span>dateTime <span class="op">=</span> <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">dateTime</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span>,</span>
<span>                   precip <span class="op">=</span> <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span>,</span>
<span>                   threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                   minTotal <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                   roll <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Plot the identified windows</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">dayRain</span><span class="op">$</span><span class="va">id</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dayRain</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">dayRain</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">dayRain</span><span class="op">$</span><span class="va">end</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>               <span class="va">dayRain</span><span class="op">$</span><span class="va">end</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>         y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">12</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>         col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="st">'red'</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>         border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## Overlay the original rainfall for clarity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">dateTime</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span>, <span class="va">chesterton</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fl">34000</span><span class="op">:</span><span class="fl">44000</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-rainsep2-1.png" width="100%"></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/JonPayneEA/riskyData/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing riskyData</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jonathan Payne <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2551-5353" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Oliver Dyer <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2773-6731" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/web/licenses/GNU%20General%20Public%20License" class="external-link"><img src="https://img.shields.io/badge/license-GNU%20General%20Public%20License-blue.svg" alt="License: GNU General Public License"></a></li>
<li><a href="https://github.com/JonPayneEA/riskyData" class="external-link"><img src="https://img.shields.io/github/languages/code-size/JonPayneEA/riskyData.svg"></a></li>
<li><a href="https://github.com/JonPayneEA/riskyData/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/JonPayneEA/riskyData.svg"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jonathan Payne, Oliver Dyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
