<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="riskyData">
<title>riskyData-Methods • riskyData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="riskyData-Methods">
<meta property="og:description" content="riskyData">
<meta property="og:image" content="https://jonpayneea.github.io/riskyData/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riskyData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/riskyData-Containers.html">riskyData-Containers</a>
    <a class="dropdown-item" href="../articles/riskyData-Methods.html">riskyData-Methods</a>
    <a class="dropdown-item" href="../articles/riskyData-Welcome.html">riskyData-Welcome</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JonPayneEA/riskyData/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>riskyData-Methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JonPayneEA/riskyData/blob/HEAD/vignettes/riskyData-Methods.Rmd" class="external-link"><code>vignettes/riskyData-Methods.Rmd</code></a></small>
      <div class="d-none name"><code>riskyData-Methods.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="the-riskydata-approach">The riskyData approach<a class="anchor" aria-label="anchor" href="#the-riskydata-approach"></a>
</h2>
<p>As mentioned in the containers vignette, functions specific to the
data stored the <code>riskyData</code> R6 containers are called methods.
Interaction with them is slightly different to the conventional methods
in R. They can all be applied using the <code>$</code> operator, meaning
that you don’t have to encapsulate an object within parenthesis.</p>
<div class="section level3">
<h3 id="available-methods">Available methods<a class="anchor" aria-label="anchor" href="#available-methods"></a>
</h3>
<p>Once you have data imported into R via the <code><a href="../reference/loadAPI.html">loadAPI()</a></code>
function, the observed data and metadata should sit within an
<code>HydroImport</code> container. Once this is available you can
interrogate the methods available for your data analytics. Interrogation
is very easy, simply apply <code>$methods()</code> to your imported
object.</p>
<p>Again we will use the bewdley example;</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">)</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">methods</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌ <span style="color: #0000BB; font-weight: bold;">Methods</span> ───────────────────────────────────────────────────────────────────────────────────┐</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$data</span>    →    Returns the raw data imported via the API                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$meta()</span>    →    Returns the metadata associated with the object                         │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$asVol()</span>    →    Calculates the volume of water relative to the time step, see ?asVol   │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$hydroYearDay()</span>    →    Calculates the hydrological year and day, see ?hydroYearDay     │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmVol()</span>    →    Removes the volume column                                              │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmHY()</span>    →    Removes the hydroYear column                                            │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmHYD()</span>    →    Removes the hydroYearDay column                                        │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$summary()</span>    →    Provides a quick summary of the raw data                             │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$coords()</span>    →    Returns coordinates from the metadata                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$nrfa()</span>    →    Returns the NRFA data from the metadata                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$dataAgg()</span>    →    Aggregate data by, hour, day, month calendar year and hydroYear      │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rollingAggs()</span>    →    Uses user specified aggregation timings, see ?rollingAggs        │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$dayStats()</span>    →    Daily statistics of flow, carried out on hydrological or calendar … │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$quality()</span>    →    Provides a quick summary table of the data qualiity flags            │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$plot()</span>    →    Create a plot of each year of data, by hydrological year                │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$window()</span>    →    Extracts the subset of data observed between the times start and end  │</span></span>
<span><span class="co">#&gt; └────────────────────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre></div>
<div class="section level4">
<h4 id="accessing-data">Accessing data<a class="anchor" aria-label="anchor" href="#accessing-data"></a>
</h4>
<p>When the data are imported from the API, they are stored in a public
pot within the container. These should be in a data.table format. These
provide an enhanced version of data.frame which allows you to do carry
out incredibly fast data manipulations. Due to the large size of our
datasets it is much more computationally efficient to use over other
methods.</p>
<p>To call the data we use <code>$data</code> as you are directly
calling the data and not using a method (or function) we can drop the
parentheses.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt;                    dateTime value quality qcode</span></span>
<span><span class="co">#&gt;      1: 2008-10-01 00:00:00  26.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      2: 2008-10-01 00:15:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      3: 2008-10-01 00:30:00  26.5    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      4: 2008-10-01 00:45:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      5: 2008-10-01 01:00:00  26.4    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     ---                                        </span></span>
<span><span class="co">#&gt; 490844: 2022-09-30 22:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490845: 2022-09-30 23:00:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490846: 2022-09-30 23:15:00  11.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490847: 2022-09-30 23:30:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490848: 2022-09-30 23:45:00  11.2    Good  &lt;NA&gt;</span></span></code></pre></div>
<p>The data available in these can differ between gauge types, the
bewdley data in this case is flow. We can see the differences if we look
at the chesterton rain gauge dataset;</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">chesterton</span><span class="op">)</span></span>
<span><span class="va">chesterton</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt;                    dateTime value valid invalid missing completeness   quality</span></span>
<span><span class="co">#&gt;      1: 2010-12-31 23:45:00   0.0     0       0       0   Incomplete Unchecked</span></span>
<span><span class="co">#&gt;      2: 2011-01-01 00:00:00   0.0     0       0       0   Incomplete Unchecked</span></span>
<span><span class="co">#&gt;      3: 2011-01-01 00:15:00   0.0     0       0       0   Incomplete Unchecked</span></span>
<span><span class="co">#&gt;      4: 2011-01-01 00:30:00   0.0     0       0       0   Incomplete Unchecked</span></span>
<span><span class="co">#&gt;      5: 2011-01-01 00:45:00   0.0     0       0       0   Incomplete Unchecked</span></span>
<span><span class="co">#&gt;     ---                                                                       </span></span>
<span><span class="co">#&gt; 411933: 2022-09-30 22:45:00   0.2     0       0     100   Incomplete Unchecked</span></span>
<span><span class="co">#&gt; 411934: 2022-09-30 23:00:00   0.0     0       0     100   Incomplete Unchecked</span></span>
<span><span class="co">#&gt; 411935: 2022-09-30 23:15:00   0.0     0       0     100   Incomplete Unchecked</span></span>
<span><span class="co">#&gt; 411936: 2022-09-30 23:30:00   0.0     0       0     100   Incomplete Unchecked</span></span>
<span><span class="co">#&gt; 411937: 2022-09-30 23:45:00   0.0     0       0     100   Incomplete Unchecked</span></span></code></pre></div>
<p>As you can see the rain gauge data has extra columns. For most
analytics the dateTime and value fields are what is used, however it is
worth checking if you need to use the extra parameters.</p>
</div>
<div class="section level4">
<h4 id="basic-methods">Basic methods<a class="anchor" aria-label="anchor" href="#basic-methods"></a>
</h4>
<p>Using the <code>$print()</code> or <code>$summary()</code> methods
can give a quick insight as to what data you have.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; hydroLoad: </span></span>
<span><span class="co">#&gt;  Data Type: Raw Import</span></span>
<span><span class="co">#&gt;  Station ID: 2001</span></span>
<span><span class="co">#&gt;  Start: 2008-10-01</span></span>
<span><span class="co">#&gt;  End: 2022-09-30 23:45:00</span></span>
<span><span class="co">#&gt;  Time Zone: 2008-10-01</span></span>
<span><span class="co">#&gt;  Observations: 490848</span></span>
<span><span class="co">#&gt;  Parameter: Flow</span></span>
<span><span class="co">#&gt;  Unit Type: m3/s</span></span>
<span><span class="co">#&gt;  Unit: http://qudt.org/1.1/vocab/unit#CubicMeterPerSecond</span></span></code></pre></div>
<p>Print works slightly differently, the containers inbuilt print
function overules the one in base R. This means you don’t need to run
<code>$print()</code> you can simply just return the object name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Works the same as</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Class: HydroImport</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Private:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Raw Import</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Station name:</span> Bewdley</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">WISKI ID:</span> 2001</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Flow</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Modifications:</span> NA</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Start:</span> 2008-10-01</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">End:</span> 2022-09-30 23:45:00</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Time Step:</span> 900</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Observations:</span> 490848</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Easting:</span> 378235</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Northing:</span> 276165</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Longitude:</span> -2.321186</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Latitude:</span> 52.383072</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Public:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                    dateTime value quality qcode</span></span>
<span><span class="co">#&gt;      1: 2008-10-01 00:00:00  26.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      2: 2008-10-01 00:15:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      3: 2008-10-01 00:30:00  26.5    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      4: 2008-10-01 00:45:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      5: 2008-10-01 01:00:00  26.4    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     ---                                        </span></span>
<span><span class="co">#&gt; 490844: 2022-09-30 22:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490845: 2022-09-30 23:00:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490846: 2022-09-30 23:15:00  11.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490847: 2022-09-30 23:30:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490848: 2022-09-30 23:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">For more details use the $methods() function, the format should be as</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">`Object_name`$methods()</span></span></span></code></pre></div>
<p>For a quick snapshot on the data quality of the imported data use
<code>$quality()</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chesterton</span><span class="op">$</span><span class="fu">quality</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      quality  count</span></span>
<span><span class="co">#&gt; 1: Unchecked 164545</span></span>
<span><span class="co">#&gt; 2:      Good 191351</span></span>
<span><span class="co">#&gt; 3:   Missing   2406</span></span>
<span><span class="co">#&gt; 4:   Suspect  53635</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="accessing-the-metadata">Accessing the metadata<a class="anchor" aria-label="anchor" href="#accessing-the-metadata"></a>
</h4>
<p>As mentioned in the container vignette, you can directly interact
with the metadata. This is part of the strict data quality elements that
<code>riskyData</code> enforces. However, should you wish to inspect all
the available metadata for an imported dataset this is simply done with
<code>$meta()</code>. For clarity the table has been transposed by
setting <code>transform = TRUE</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>transform <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;               [,1]                                                                                                                                  </span></span>
<span><span class="co">#&gt; dataType      "Raw Import"                                                                                                                          </span></span>
<span><span class="co">#&gt; modifications NA                                                                                                                                    </span></span>
<span><span class="co">#&gt; stationName   "Bewdley"                                                                                                                             </span></span>
<span><span class="co">#&gt; riverName     "River Severn"                                                                                                                        </span></span>
<span><span class="co">#&gt; WISKI         "2001"                                                                                                                                </span></span>
<span><span class="co">#&gt; RLOID         "2001"                                                                                                                                </span></span>
<span><span class="co">#&gt; stationGuide  NA                                                                                                                                    </span></span>
<span><span class="co">#&gt; baseURL       "http://environment.data.gov.uk/hydrology/id/measures/"                                                                               </span></span>
<span><span class="co">#&gt; dataURL       "8820d897-a09e-4857-8095-5834fee6962f-flow-i-900-m3s-qualified/readings.json?_limit=2000000&amp;mineq-date=2008-10-01&amp;max-date=2022-10-01"</span></span>
<span><span class="co">#&gt; measureURL    "8820d897-a09e-4857-8095-5834fee6962f-flow-i-900-m3s-qualified"                                                                       </span></span>
<span><span class="co">#&gt; idNRFA        "54001"                                                                                                                               </span></span>
<span><span class="co">#&gt; urlNRFA       "https://nrfa.ceh.ac.uk/data/station/info/54001.html"                                                                                 </span></span>
<span><span class="co">#&gt; easting       "378235"                                                                                                                              </span></span>
<span><span class="co">#&gt; northing      "276165"                                                                                                                              </span></span>
<span><span class="co">#&gt; latitude      "52.38307"                                                                                                                            </span></span>
<span><span class="co">#&gt; longitude     "-2.321186"                                                                                                                           </span></span>
<span><span class="co">#&gt; area          "4325"                                                                                                                                </span></span>
<span><span class="co">#&gt; parameter     "Flow"                                                                                                                                </span></span>
<span><span class="co">#&gt; unitName      "m3/s"                                                                                                                                </span></span>
<span><span class="co">#&gt; unit          "http://qudt.org/1.1/vocab/unit#CubicMeterPerSecond"                                                                                  </span></span>
<span><span class="co">#&gt; datum         NA                                                                                                                                    </span></span>
<span><span class="co">#&gt; boreholeDepth NA                                                                                                                                    </span></span>
<span><span class="co">#&gt; aquifer       NA                                                                                                                                    </span></span>
<span><span class="co">#&gt; start         "2008-10-01"                                                                                                                          </span></span>
<span><span class="co">#&gt; end           "2022-09-30 23:45:00"                                                                                                                 </span></span>
<span><span class="co">#&gt; timeStep      "900"                                                                                                                                 </span></span>
<span><span class="co">#&gt; timeZone      "2008-10-01"                                                                                                                          </span></span>
<span><span class="co">#&gt; records       "490848"</span></span></code></pre></div>
<p>Other metadata functions include;</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Coordinates of gauges</span></span>
<span><span class="va">chesterton</span><span class="op">$</span><span class="fu">coords</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Easting Northing Latitude Longitude</span></span>
<span><span class="co">#&gt; 1:  512830   294610 52.53766 -0.337867</span></span>
<span></span>
<span><span class="co">## NRFA details</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">nrfa</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    WISKI codeNRFA                                             urlNRFA</span></span>
<span><span class="co">#&gt; 1:  2001    54001 https://nrfa.ceh.ac.uk/data/station/info/54001.html</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="adding-to-the-public-data">Adding to the public data<a class="anchor" aria-label="anchor" href="#adding-to-the-public-data"></a>
</h4>
<p>Though you could add any number of extra elements to the public data,
the <code>riskyData</code> containers currently have a couple of useful
methods.</p>
<p>If you wished to convert flow into a volume us the
<code>$asVol</code> method;</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">asVol</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This adds a volume column to the data table. It uses the metadata to
derive the suitable values based on the difference in time between
observations. If you wished to remove the column use
``<code>$rmVol()</code>;</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">rmVol</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The other useful method is <code>$hydroYearDay()</code> this
generates 2 things;</p>
<ul>
<li><p>Hydrological year (defaults to 1<sup>st</sup> October to 30
September)</p></li>
<li><p>Hydrological day</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>bewdley<span class="sc">$</span><span class="fu">hydroYearDay</span>()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a> [36mℹ [39m Calculating hydrological year and day</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a> [32m✔ [39m Calculating hydrological year and day  [<span class="dv">38</span>;<span class="dv">5</span>;249m[<span class="fl">6.7</span>s] [39m</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>bewdley<span class="sc">$</span>data</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                    dateTime value quality qcode hydroYear hydroYearDay</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1: 2008-10-01 00:00:00  26.3    Good  &lt;NA&gt;      2009            1</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      2: 2008-10-01 00:15:00  26.6    Good  &lt;NA&gt;      2009            1</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3: 2008-10-01 00:30:00  26.5    Good  &lt;NA&gt;      2009            1</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      4: 2008-10-01 00:45:00  26.6    Good  &lt;NA&gt;      2009            1</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      5: 2008-10-01 01:00:00  26.4    Good  &lt;NA&gt;      2009            1</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ---                                                               </span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 490844: 2022-09-30 22:45:00  11.2    Good  &lt;NA&gt;      2022          365</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 490845: 2022-09-30 23:00:00  11.2    Good  &lt;NA&gt;      2022          365</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 490846: 2022-09-30 23:15:00  11.3    Good  &lt;NA&gt;      2022          365</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 490847: 2022-09-30 23:30:00  11.2    Good  &lt;NA&gt;      2022          365</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 490848: 2022-09-30 23:45:00  11.2    Good  &lt;NA&gt;      2022          365</span></span></code></pre></div>
<p>Similarly to remove the columns you can remove the hydrological year
with <code>$rmHY()</code> and the hydrological day with
<code>$rmHYD()</code>;</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>bewdley<span class="sc">$</span><span class="fu">rmHY</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a> [36mℹ [39m Removing hydroYear column</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a> [32m✔ [39m Removing hydroYear column  [<span class="dv">38</span>;<span class="dv">5</span>;249m[37ms] [39m</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>bewdley<span class="sc">$</span><span class="fu">rmHYD</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a> [36mℹ [39m Removing hydroYearDay column</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a> [32m✔ [39m Removing hydroYearDay column  [<span class="dv">38</span>;<span class="dv">5</span>;249m[16ms] [39m</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="plotting-data">Plotting data<a class="anchor" aria-label="anchor" href="#plotting-data"></a>
</h4>
<p>Currently the containers only support plotting in one way….</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>bewdley<span class="sc">$</span><span class="fu">hydroYearDay</span>()<span class="sc">$</span><span class="fu">plot</span>()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a> [36mℹ [39m Calculating hydrological year and day</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a> [32m✔ [39m Calculating hydrological year and day  [<span class="dv">38</span>;<span class="dv">5</span>;249m[<span class="fl">6.7</span>s] [39m</span></code></pre></div>
<p><img src="riskyData-Methods_files/figure-html/plot1-1.png" width="768"></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jonathan Payne, Oliver Dyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
