<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="riskyData">
<title>riskyData-Containers • riskyData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="riskyData-Containers">
<meta property="og:description" content="riskyData">
<meta property="og:image" content="https://jonpayneea.github.io/riskyData/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riskyData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/riskyData-Containers.html">riskyData-Containers</a>
    <a class="dropdown-item" href="../articles/riskyData-Methods.html">riskyData-Methods</a>
    <a class="dropdown-item" href="../articles/riskyData-Ratings.html">riskyData-Ratings</a>
    <a class="dropdown-item" href="../articles/riskyData-Welcome.html">riskyData-Welcome</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JonPayneEA/riskyData/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>riskyData-Containers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JonPayneEA/riskyData/blob/HEAD/vignettes/riskyData-Containers.Rmd" class="external-link"><code>vignettes/riskyData-Containers.Rmd</code></a></small>
      <div class="d-none name"><code>riskyData-Containers.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="containers-in-riskydata">Containers in riskyData<a class="anchor" aria-label="anchor" href="#containers-in-riskydata"></a>
</h2>
<p>If you have seen the previous vignette <code>riskyData-Welcome</code>
you might have recognised that when data are pulled from the API they
aren’t in a conventional format. When data are scraped using the
<code><a href="../reference/loadAPI.html">loadAPI()</a></code> function , gauge metadata are also pulled
simultaneously.</p>
<p>Using the <code>bewdley</code> dataset we can investigate;</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jonpayneea.github.io/riskyData/">riskyData</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">)</span></span>
<span><span class="va">bewdley</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Class: HydroImport</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Private:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Raw Import</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Station name:</span> Bewdley</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">WISKI ID:</span> 2001</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Flow</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Modifications:</span> NA</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Start:</span> 2008-10-01</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">End:</span> 2022-09-30 23:45:00</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Time Step:</span> 900</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Observations:</span> 490848</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Easting:</span> 378235</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Northing:</span> 276165</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Longitude:</span> -2.321186</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Latitude:</span> 52.383072</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Public:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                    dateTime value quality qcode</span></span>
<span><span class="co">#&gt;      1: 2008-10-01 00:00:00  26.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      2: 2008-10-01 00:15:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      3: 2008-10-01 00:30:00  26.5    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      4: 2008-10-01 00:45:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      5: 2008-10-01 01:00:00  26.4    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     ---                                        </span></span>
<span><span class="co">#&gt; 490844: 2022-09-30 22:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490845: 2022-09-30 23:00:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490846: 2022-09-30 23:15:00  11.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490847: 2022-09-30 23:30:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490848: 2022-09-30 23:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">For more details use the $methods() function, the format should be as</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">`Object_name`$methods()</span></span></span></code></pre></div>
<p>When the dataset is printed there are 2 sections:
<strong>private</strong> and <strong>public</strong>. These are both
grouped into a container called bewdley, and have a class of
<code>HydroImport</code> and <code>R6</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "HydroImport" "R6"</span></span></code></pre></div>
<p>Using R6 allows you to define private fields and methods, in addition
to the public ones. What private means is that fields and methods can
only be accessed within the class, and not from the outside. Whereas
with public, you can interact and modify the fields.</p>
<p>R6 is an implemention of encapsulated object-oriented programming for
R, and is a simpler, faster, lighter-weight alternative to R's built-in
reference classes. This style of programming is also sometimes referred
to as classical object-oriented programming.</p>
<p>Some features of R6:</p>
<ul>
<li><p>R6 objects have reference semantics.</p></li>
<li><p>R6 cleanly supports inheritance across packages.</p></li>
<li><p>R6 classes have public and private members.</p></li>
</ul>
<p>In contrast to R's reference classes, R6 is not built on the S4 class
system, so it does not require the <em>methods</em> package. Unlike
reference classes, R6 classes can be cleanly inherited across different
packages.Public data</p>
<div class="section level3">
<h3 id="public-members">Public members<a class="anchor" aria-label="anchor" href="#public-members"></a>
</h3>
<p>Public members are accessible from outside the class and can be used
and modified directly.</p>
<p>To call the raw data in <code>riskyData</code> you can do so with
<code>$data</code>, this does add one level of complexity against a
normal data frame but the benefits outstrip the negatives.</p>
<p>To call up the data on the bewdley dataset use;</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt;                    dateTime value quality qcode</span></span>
<span><span class="co">#&gt;      1: 2008-10-01 00:00:00  26.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      2: 2008-10-01 00:15:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      3: 2008-10-01 00:30:00  26.5    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      4: 2008-10-01 00:45:00  26.6    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      5: 2008-10-01 01:00:00  26.4    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     ---                                        </span></span>
<span><span class="co">#&gt; 490844: 2022-09-30 22:45:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490845: 2022-09-30 23:00:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490846: 2022-09-30 23:15:00  11.3    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490847: 2022-09-30 23:30:00  11.2    Good  &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 490848: 2022-09-30 23:45:00  11.2    Good  &lt;NA&gt;</span></span></code></pre></div>
<p>As with a normal dataframe we can interact with functions from
outside of the <code>riskyData</code> package;</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 61.38127</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 523</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7.61</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">bewdley</span><span class="op">$</span><span class="va">data</span>, <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dateTime</span>, y <span class="op">=</span> <span class="va">value</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="riskyData-Containers_files/figure-html/public2-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="private-data">Private data<a class="anchor" aria-label="anchor" href="#private-data"></a>
</h3>
<p>Private members are only accessible from within the class, and they
are encapsulated to ensure data integrity.</p>
<p>All the gauge metadata are stored within the private section, with
this you cannot directly interact with or edit these data. For example
let’s say I wished to change the catchment area of the bewdley
dataset</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="va">start</span> <span class="op">&lt;-</span> <span class="fu">now</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in bewdley$start &lt;- now() : cannot add bindings to a locked environment</span></span></code></pre>
<p>The data are protected, this ensures that they can be used at all
times in other dependent functions. There is only one way to interact
with the private metadata and that is through functions built into the
container.</p>
</div>
<div class="section level3">
<h3 id="active-bindings">Active Bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a>
</h3>
<p>Active bindings are special methods that allow you to compute values
on-the-fly when accessing an attribute.</p>
</div>
<div class="section level3">
<h3 id="container-functions">Container functions<a class="anchor" aria-label="anchor" href="#container-functions"></a>
</h3>
<p>Functions specific to the data stored within R6 containers are called
methods. To use these you interact with them in a different manner to
how you normally do in R. They can all be applied using the
<code>$</code> operator, meaning that you don’t have to encapsulate an
object within parenthesis.</p>
<p>Do find all the methods available to you use <code>$methods()</code>
after the object name. For example;</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">methods</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ┌ <span style="color: #0000BB; font-weight: bold;">Methods</span> ───────────────────────────────────────────────────────────────────────────────────┐</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$data</span>    →    Returns the raw data imported via the API                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$meta()</span>    →    Returns the metadata associated with the object                         │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$asVol()</span>    →    Calculates the volume of water relative to the time step, see ?asVol   │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$hydroYearDay()</span>    →    Calculates the hydrological year and day, see ?hydroYearDay     │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmVol()</span>    →    Removes the volume column                                              │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmHY()</span>    →    Removes the hydroYear column                                            │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rmHYD()</span>    →    Removes the hydroYearDay column                                        │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$summary()</span>    →    Provides a quick summary of the raw data                             │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$coords()</span>    →    Returns coordinates from the metadata                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$nrfa()</span>    →    Returns the NRFA data from the metadata                                 │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$dataAgg()</span>    →    Aggregate data by, hour, day, month calendar year and hydroYear      │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$rollingAggs()</span>    →    Uses user specified aggregation timings, see ?rollingAggs        │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$dayStats()</span>    →    Daily statistics of flow, carried out on hydrological or calendar … │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$quality()</span>    →    Provides a quick summary table of the data qualiity flags            │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$plot()</span>    →    Create a plot of each year of data, by hydrological year                │</span></span>
<span><span class="co">#&gt; │ <span style="color: #BB0000; font-weight: bold;">obj$window()</span>    →    Extracts the subset of data observed between the times start and end  │</span></span>
<span><span class="co">#&gt; └────────────────────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre></div>
<p>Using methods inbuilt to the containers, you can interact with the
private metadata;</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return NRFA details</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">nrfa</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    WISKI codeNRFA                                             urlNRFA</span></span>
<span><span class="co">#&gt; 1:  2001    54001 https://nrfa.ceh.ac.uk/data/station/info/54001.html</span></span>
<span></span>
<span><span class="co"># Return gauge coordinate data</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">coords</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Easting Northing Latitude Longitude</span></span>
<span><span class="co">#&gt; 1:  378235   276165 52.38307 -2.321186</span></span>
<span></span>
<span><span class="co"># Return all the metadata</span></span>
<span><span class="va">bewdley</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      dataType modifications stationName    riverName WISKI RLOID stationGuide</span></span>
<span><span class="co">#&gt; 1: Raw Import            NA     Bewdley River Severn  2001  2001           NA</span></span>
<span><span class="co">#&gt;                                                  baseURL</span></span>
<span><span class="co">#&gt; 1: http://environment.data.gov.uk/hydrology/id/measures/</span></span>
<span><span class="co">#&gt;                                                                                                                                 dataURL</span></span>
<span><span class="co">#&gt; 1: 8820d897-a09e-4857-8095-5834fee6962f-flow-i-900-m3s-qualified/readings.json?_limit=2000000&amp;mineq-date=2008-10-01&amp;max-date=2022-10-01</span></span>
<span><span class="co">#&gt;                                                       measureURL idNRFA</span></span>
<span><span class="co">#&gt; 1: 8820d897-a09e-4857-8095-5834fee6962f-flow-i-900-m3s-qualified  54001</span></span>
<span><span class="co">#&gt;                                                urlNRFA easting northing</span></span>
<span><span class="co">#&gt; 1: https://nrfa.ceh.ac.uk/data/station/info/54001.html  378235   276165</span></span>
<span><span class="co">#&gt;    latitude longitude area parameter unitName</span></span>
<span><span class="co">#&gt; 1: 52.38307 -2.321186 4325      Flow     m3/s</span></span>
<span><span class="co">#&gt;                                                  unit datum boreholeDepth</span></span>
<span><span class="co">#&gt; 1: http://qudt.org/1.1/vocab/unit#CubicMeterPerSecond    NA            NA</span></span>
<span><span class="co">#&gt;    aquifer      start                 end timeStep   timeZone records</span></span>
<span><span class="co">#&gt; 1:      NA 2008-10-01 2022-09-30 23:45:00      900 2008-10-01  490848</span></span></code></pre></div>
<p>More details on methods will be covered in the methods vignette.</p>
</div>
<div class="section level3">
<h3 id="inherited-members">Inherited Members<a class="anchor" aria-label="anchor" href="#inherited-members"></a>
</h3>
<p>Inherited members are methods and fields inherited from the parent
class if your R6 class inherits from another.</p>
<p>When data are imported with the <code><a href="../reference/loadAPI.html">loadAPI()</a></code> function, the
container used is <code>HydroImport</code>. This is the parent class. If
an aggregation method applied, it can fundamentally change the data
structure. For this reason a child class was developed called
<code>HydroAggs</code>. Most functionality is inherited from the
<code>HydroImport</code> parent class, however some methods had to be
amended to ensure that they would still work.</p>
<p>To generate a <code>HydroAggs</code> dataset we can use the
<code>$dataAgg()</code> function. Here we will calculate the hourly
maximum data from the bewdley dataset and export it as class
<code>HydroAggs</code>;</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bewdley</span><span class="op">$</span><span class="fu">dataAgg</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"hourly"</span>, method <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Class: HydroAggs</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Private:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Aggregated - hourly max</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Station name:</span> Bewdley</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">WISKI ID:</span> 2001</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Data Type:</span> Flow</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Modifications:</span> hourly max</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Start:</span> 2008-10-01 0</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">End:</span> 2022-09-30 23</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Time Step:</span> Hourly Unstable</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Easting:</span> 378235</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Northing:</span> 276165</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Longitude:</span> -2.321186</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Latitude:</span> 52.383072</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Public:</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;              dateTime hourlyMax</span></span>
<span><span class="co">#&gt;      1:  2008-10-01 0      26.6</span></span>
<span><span class="co">#&gt;      2:  2008-10-01 1      26.4</span></span>
<span><span class="co">#&gt;      3:  2008-10-01 2      25.3</span></span>
<span><span class="co">#&gt;      4:  2008-10-01 3      24.0</span></span>
<span><span class="co">#&gt;      5:  2008-10-01 4      23.3</span></span>
<span><span class="co">#&gt;     ---                        </span></span>
<span><span class="co">#&gt; 122708: 2022-09-30 19      10.8</span></span>
<span><span class="co">#&gt; 122709: 2022-09-30 20      10.8</span></span>
<span><span class="co">#&gt; 122710: 2022-09-30 21      11.1</span></span>
<span><span class="co">#&gt; 122711: 2022-09-30 22      11.2</span></span>
<span><span class="co">#&gt; 122712: 2022-09-30 23      11.3</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">For more details use the $methods() function, the format should be as</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">`Object_name`$methods()</span></span></span></code></pre>
<p>Though there quite a lot of changes under the hood the output looks
very similar to class <code>HydroImport</code>. The public data is
different as we have applied an aggregation, with the private metadata
the start and end times of the series differ. One of the key changes is
the modifications line, all the containers used in
<code>riskyData</code> track changes made to the data, in this case it
indicates that an “hourly max” aggregation has been applied.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jonathan Payne, Oliver Dyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
